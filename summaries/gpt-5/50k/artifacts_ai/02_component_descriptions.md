| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Application Bootstrap | Bootstraps the Spring Boot app and wires components | PetClinicApplication.main(); SpringApplication.run | Domain Model Core; Owners/Pets/Visits Module; Vets Module; System/Edge Web; Cross-Cutting Config (Caching & i18n); Observability/Actuator; Persistence & DB Initialization; Static Assets & Theming; AOT/Runtime Hints | Spring Boot 3.5.x, Auto-configuration, Component scanning |
| AOT/Runtime Hints | Native image support via resource/serialization hints | Registers resource hints (db/*, messages/*, mysql-default-conf); serialization hints (BaseEntity, Person, Vet) | Domain Model Core | Spring AOT, GraalVM Native Build Tools |
| Domain Model Core | Base entities and shared domain logic | BaseEntity.isNew(); Owner.getPet(name, ignoreNew), getPet(id), addPet(Pet), addVisit(petId, Visit); Pet.addVisit(Visit); Vet.getSpecialties(), getNrOfSpecialties(), addSpecialty | — | JPA (Hibernate), Bean Validation (Jakarta Validation) |
| Owners/Pets/Visits Module | CRUD and workflows for owners, pets, visits; form validation and view rendering | Endpoints: GET/POST /owners/new; GET /owners/find; GET /owners?page={n}&lastName={prefix?}; GET /owners/{ownerId}; GET/POST /owners/{ownerId}/edit; GET/POST /owners/{ownerId}/pets/new; GET/POST /owners/{ownerId}/pets/{petId}/edit; GET/POST /owners/{ownerId}/pets/{petId}/visits/new; Validation: PetValidator.validate; Binding: disallow "id" | Domain Model Core; Cross-Cutting Config (Caching & i18n); Persistence & DB Initialization; Static Assets & Theming | Spring MVC, Thymeleaf, Spring Data JPA (OwnerRepository, PetTypeRepository), Bean Validation, Pageable (5/page), EAGER aggregates with cascade |
| Vets Module | Read-mostly views/APIs for vets and specialties; caching | Endpoints: GET /vets.html?page={n}; GET /vets (JSON/XML); Repository: VetRepository.findAll(), findAll(Pageable); Cache: @Cacheable("vets") | Domain Model Core; Cross-Cutting Config (Caching & i18n); Persistence & DB Initialization; Static Assets & Theming | Spring MVC, Thymeleaf, Spring Data Repository, JCache (Caffeine), Pageable (5/page), DTO (Vets) |
| System/Edge Web | Welcome page and crash/error handling with content negotiation | GET / -> welcome.html; GET /oups -> throws RuntimeException; Error responses: JSON (timestamp,status,error,message,path) or HTML page | Cross-Cutting Config (Caching & i18n); Static Assets & Theming | Spring MVC, Content Negotiation, Thymeleaf |
| Cross-Cutting Config (Caching & i18n) | Cache and locale configuration for the app | Caching: cache name "vets", @EnableCaching, JCache stats; i18n: SessionLocaleResolver, LocaleChangeInterceptor (param lang), messages bundles (messages_*.properties) | — | Spring Cache (JCache), Caffeine, Spring Web MVC interceptors, MessageSource |
| Observability/Actuator | Operational endpoints and health probes | /actuator/*; Kubernetes aliases: /livez, /readyz | Application Bootstrap | Spring Boot Actuator, Logging configuration |
| Persistence & DB Initialization | Database connectivity, schema/data init, profiles | Profiles: default=h2, mysql, postgres; Env: MYSQL_URL/USER/PASS, POSTGRES_URL/USER/PASS; SQL init: db/${database}/schema.sql, data.sql; JPA: spring.jpa.hibernate.ddl-auto=none | Domain Model Core | JDBC (HikariCP), H2/MySQL/PostgreSQL, Spring Profiles, SQL scripts |
| Static Assets & Theming | UI templates, styles, and static resources | Thymeleaf templates: templates/*; Static: /resources/css/petclinic.css; WebJars: /webjars/bootstrap/... , /webjars/font-awesome/...; Cache-Control max-age=12h | — | Thymeleaf, SCSS (libsass-maven-plugin), WebJars (Bootstrap 5.3.6, Font Awesome 4.7), HTTP caching |