| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| PetClinicApplication | Application bootstrap; starts Spring context | main(String[] args) | All components via component scanning | Spring Boot 3.5.x, AutoConfiguration |
| PetClinicRuntimeHints | Registers AOT/native image resource and serialization hints | registers hints for db/*, messages/*, mysql-default-conf; serializable: BaseEntity, Person, Vet | Domain Model | Spring AOT, GraalVM Native Image |
| Domain Model (BaseEntity, NamedEntity, Person, Owner, Pet, PetType, Visit, Vet, Specialty) | Core domain entities and aggregates (Owner→Pet→Visit; Vet↔Specialty) | Owner.getPet(name, ignoreNew); Owner.getPet(id); Owner.addPet(Pet); Owner.addVisit(petId, Visit); Pet.addVisit(Visit); Vet.getSpecialties(), getNrOfSpecialties(), addSpecialty | — | JPA/Hibernate (annotations, relationships), Bean Validation (Jakarta Validation) |
| OwnerRepository | CRUD and queries for Owner aggregate | findByLastNameStartingWith(String, Pageable) → Page<Owner>; findById(Integer) → Optional<Owner>; save(Owner) | Domain Model; Persistence | Spring Data JPA, Transactions (default) |
| PetTypeRepository | Lookup and list Pet types | findPetTypes() → Collection<PetType> (sorted by name) | Domain Model; Persistence | Spring Data JPA (@Query) |
| VetRepository | Read operations for Vets with caching | findAll() → Collection<Vet>; findAll(Pageable) → Page<Vet> (both @Cacheable("vets")) | Domain Model; CacheConfiguration; Persistence | Spring Data Repository, @Cacheable (JCache), @Transactional(readOnly=true) |
| PetValidator | Custom validation for Pet | validate(Object, Errors): name required; type required; birthDate required and not future; duplicate name within owner → error "duplicate" | Domain Model (Owner, Pet); Controllers | Spring Validator, Bean Validation integration |
| PetTypeFormatter | Parse/print PetType for web binding | parse(String, Locale) → PetType; print(PetType, Locale) → String | PetTypeRepository | Spring MVC Formatter |
| OwnerController | Owner CRUD, search, details views | GET /owners/new; POST /owners/new; GET /owners/find; GET /owners?lastName=&page=; GET /owners/{ownerId}; GET /owners/{ownerId}/edit; POST /owners/{ownerId}/edit | OwnerRepository; Domain Model; Thymeleaf views; WebDataBinder (disallow id) | Spring MVC, Thymeleaf, Bean Validation |
| PetController | Pet CRUD under an Owner; apply validation and type formatting | GET /owners/{ownerId}/pets/new; POST /owners/{ownerId}/pets/new; GET /owners/{ownerId}/pets/{petId}/edit; POST /owners/{ownerId}/pets/{petId}/edit | OwnerRepository; PetTypeRepository; PetValidator; PetTypeFormatter; Domain Model | Spring MVC, Thymeleaf, Spring Validator |
| VisitController | Create Visits for a Pet within an Owner aggregate | GET /owners/{ownerId}/pets/{petId}/visits/new; POST /owners/{ownerId}/pets/{petId}/visits/new | OwnerRepository; Domain Model (Owner.addVisit); Bean Validation | Spring MVC, Thymeleaf, Bean Validation |
| VetController | Vets listing (HTML) and API (JSON/XML); leverages caching | GET /vets.html?page=; GET /vets (returns Vets DTO) | VetRepository; Vets DTO; Thymeleaf | Spring MVC, Thymeleaf, Jackson (JSON/XML), Caching via repository |
| CacheConfiguration | Enables and configures caching; defines JCache cache "vets" with stats | CacheManager/JCache setup (cache name "vets") | Caffeine provider; VetRepository (uses the cache) | Spring Cache Abstraction, JCache (javax.cache), Caffeine |
| WebConfiguration (i18n) | Internationalization and locale switching | LocaleResolver (SessionLocaleResolver EN default); LocaleChangeInterceptor (?lang); addInterceptors | Controllers; Views (messages/*) | Spring MVC, i18n |
| WelcomeController | Home page | GET / → view "welcome" | Views | Spring MVC, Thymeleaf |
| CrashController | Error simulation to exercise error handling | GET /oups → throws RuntimeException (HTML/JSON error responses) | Error handling infrastructure | Spring MVC, Problem/Whitelabel override (custom error page) |
| Actuator Endpoints | Operational endpoints and k8s probe aliases | GET /actuator/*; GET /livez; GET /readyz | Application context | Spring Boot Actuator |
| View Layer & Static Assets | Server-side HTML rendering and static resource delivery | Thymeleaf templates under /templates; Static: /resources/css/petclinic.css; /webjars/bootstrap/... | Controllers; i18n messages | Thymeleaf, WebJars (Bootstrap, FontAwesome), SCSS build (libsass) |
| Persistence/Database | Relational persistence and initialization | JDBC connectivity; schema.sql/data.sql per profile (db/h2|mysql|postgres/*) | Repositories; Domain Model | H2 (default), MySQL, PostgreSQL; Hibernate; HikariCP; spring.jpa.hibernate.ddl-auto=none |