| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Owner Management | Owner CRUD, search, details; aggregate root managing Pets and Visits; binding protection | HTTP: GET/POST /owners/new, GET /owners/find, GET /owners?lastName=&page=, GET/POST /owners/{ownerId}/edit, GET /owners/{ownerId}; Domain: Owner.getPet(name/id, ignoreNew), Owner.addPet(Pet), Owner.addVisit(petId, Visit) | OwnerRepository; Pet Management; Visit Management; Domain Model Base; Internationalization & Web Config; UI/Thymeleaf Templates; Persistence & Database Init | Spring MVC, Thymeleaf, Bean Validation, Spring Data JPA, Hibernate |
| Pet Management | Create/update pets; duplicate-name-per-owner and date validations; type formatting | HTTP: GET/POST /owners/{ownerId}/pets/new, GET/POST /owners/{ownerId}/pets/{petId}/edit; Validation: PetValidator; Formatting: PetTypeFormatter | OwnerRepository; PetTypeRepository; Owner Management; Domain Model Base; Internationalization & Web Config; UI/Thymeleaf Templates | Spring MVC, Bean Validation, Spring Data JPA, Formatter API |
| Visit Management | Create visits for a pet; attach to Owner/Pet aggregate; preload Owner/Pet | HTTP: GET/POST /owners/{ownerId}/pets/{petId}/visits/new; Domain: Owner.addVisit(petId, Visit), Pet.addVisit(Visit) | OwnerRepository; Owner Management; Pet Management; Domain Model Base; UI/Thymeleaf Templates | Spring MVC, Bean Validation, Spring Data JPA (cascade via Owner aggregate) |
| Vet Management | List vets (HTML, paged) and expose vets as JSON/XML; cache read-mostly data | HTTP: GET /vets.html?page=, GET /vets (JSON/XML via Vets wrapper) | VetRepository; Caching Configuration; UI/Thymeleaf Templates; Domain Model Base | Spring MVC, Thymeleaf, Spring Data (Repository), JCache (Caffeine), Jackson/JAXB |
| OwnerRepository | Persistence for Owner aggregate with cascade to Pets/Visits; paginated search | JpaRepository<Owner,Integer>; findByLastNameStartingWith(String, Pageable); findById(Integer) | Domain Model Base; Persistence & Database Init | Spring Data JPA, Hibernate, SQL (H2/MySQL/Postgres) |
| PetTypeRepository | Reference data access for PetType; ordered lookup | JpaRepository<PetType,Integer>; List<PetType> findPetTypes() | Domain Model Base; Persistence & Database Init; Pet Management | Spring Data JPA, Hibernate |
| VetRepository | Read vets with caching and pagination | Collection<Vet> findAll(); Page<Vet> findAll(Pageable) (@Cacheable("vets")) | Caching Configuration; Domain Model Base; Persistence & Database Init | Spring Data (Repository), JCache (Caffeine), Hibernate |
| Domain Model Base | Common entity base classes and validation | BaseEntity(id, isNew()); Person(first_name, last_name); NamedEntity(name) | Persistence & Database Init | JPA @MappedSuperclass, Bean Validation, Serializable |
| System/Web Infrastructure | Welcome page and crash/error demonstration | HTTP: GET / (welcome view), GET /oups (throws RuntimeException); custom error page | UI/Thymeleaf Templates; Internationalization & Web Config | Spring MVC, Error handling customization |
| Caching Configuration | Enable and configure caches; define “vets” cache with stats | @EnableCaching; Cache “vets” via JCache; @Cacheable on VetRepository | VetRepository; Vet Management | JCache API, Caffeine provider, Cache-aside pattern |
| Internationalization & Web Config | Locale resolution and change via URL; message bundles; interceptor registration | SessionLocaleResolver (default EN); LocaleChangeInterceptor (?lang=xx); messages/messages*.properties | All Controllers; UI/Thymeleaf Templates | Spring MVC config, Resource bundles (i18n) |
| UI/Thymeleaf Templates | Server-side views and fragments; navigation and forms | Views: welcome, vets/vetList, owners/*, pets/*, visits/*; Fragments: layout, inputField, selectField | Owner Management; Pet Management; Visit Management; Vet Management; Internationalization & Web Config | Thymeleaf, WebJars (Bootstrap, Font Awesome), HTML/SCSS |
| Persistence & Database Init | Database configuration and initialization; profile-based DB selection | Properties: spring.jpa.hibernate.ddl-auto=none, spring.sql.init.mode; Scripts: db/${database}/schema.sql, data.sql | Repositories; Domain Model Base | Spring Data JPA, Hibernate, H2/MySQL/PostgreSQL, SQL init |
| Actuator & Probes | Operational endpoints and K8s health probes | HTTP: /actuator/*, /livez, /readyz | Deployment & Ops | Spring Boot Actuator, K8s probe integration |
| Native Image & AOT | Native runtime hints and resource/serialization config; native build support | PetClinicRuntimeHints (resources db/*, messages/*; serialization BaseEntity, Person, Vet) | Domain Model Base; Persistence & Database Init | Spring AOT, GraalVM native-maven-plugin |
| Testing & QA | Unit, MVC, JPA, and integration tests; performance tests; QA tooling | @WebMvcTest, @DataJpaTest, Testcontainers MySQL/Postgres; JMeter plan; Checkstyle/Jacoco | Repositories; Controllers; Persistence & Database Init | JUnit 5, Spring Boot Test, Testcontainers, Docker Compose, JMeter, Jacoco, Checkstyle |
| Deployment & Ops | Containerization and Kubernetes manifests; DB service binding; probes | docker-compose (mysql, postgres); k8s db.yml and petclinic.yml (env, secret, probes) | Actuator & Probes; Persistence & Database Init | Docker Compose, Kubernetes, Service Binding, Cloud Native Buildpacks |
| Static Assets & Build | SCSS compilation and static asset delivery | petclinic.scss → petclinic.css; /resources/css/petclinic.css; WebJars JS | UI/Thymeleaf Templates | libsass-maven-plugin, WebJars, Static resource caching (12h) |