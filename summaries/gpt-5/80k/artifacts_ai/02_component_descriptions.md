| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| PetClinicApplication | Bootstraps the Spring Boot monolith and component scanning | main(String[] args) | WebConfiguration; CacheConfiguration; Actuator Endpoints; WelcomeController; CrashController; VetController; OwnerController; PetController; VisitController; OwnerRepository; PetTypeRepository; VetRepository; Thymeleaf Templates; Domain Aggregates | Spring Boot 3.5.x, Auto-configuration, Maven build-image |
| PetClinicRuntimeHints | Registers native-image runtime/resource/serialization hints | registerHints(RuntimeHints) | Owners Aggregate; Vets Aggregate; PetType Domain; Vets DTO | Spring AOT, GraalVM Native, RuntimeHintsRegistrar |
| WebConfiguration (i18n) | Configures locale, i18n, and interceptors | SessionLocaleResolver bean; LocaleChangeInterceptor (param "lang"); addInterceptors(InterceptorRegistry) | Controllers; Thymeleaf Templates | Spring MVC, i18n/message bundles, SessionLocaleResolver |
| CacheConfiguration (JCache/Caffeine) | Enables and configures caches (name "vets"; stats enabled) | @EnableCaching; CacheManager; cache "vets" | VetRepository | JCache API, Caffeine |
| WelcomeController | Serves the home/welcome page | GET / | Thymeleaf Templates; WebConfiguration | Spring MVC, Thymeleaf |
| CrashController | Demonstrates error handling by throwing an exception | GET /oups (throws RuntimeException) | Thymeleaf Templates | Spring MVC, Error handling (error.html) |
| VetController | Renders vets list (HTML) and exposes vets as JSON | GET /vets.html?page={n}; GET /vets (JSON) | VetRepository; Thymeleaf Templates; CacheConfiguration; Vets DTO | Spring MVC, Jackson, Pagination (size=5, 1-based), Caching |
| OwnerController | Owner CRUD and search; owner details view | GET /owners/new; POST /owners/new; GET /owners/find; GET /owners?page={n}&lastName={prefix?}; GET /owners/{ownerId}; GET/POST /owners/{ownerId}/edit | OwnerRepository; Thymeleaf Templates; WebConfiguration | Spring MVC, Bean Validation (JSR 380), Pagination (size=5, 1-based) |
| PetController | Pet create/edit under an owner; validation and type binding | GET/POST /owners/{ownerId}/pets/new; GET/POST /owners/{ownerId}/pets/{petId}/edit | OwnerRepository; PetTypeRepository; PetValidator; PetTypeFormatter; Thymeleaf Templates | Spring MVC, Bean Validation, Spring Formatter |
| VisitController | Create visits for a pet under an owner | GET/POST /owners/{ownerId}/pets/{petId}/visits/new | OwnerRepository; Thymeleaf Templates | Spring MVC, Bean Validation |
| OwnerRepository | Persistence for Owner aggregate (incl. cascade to Pet/Visit) | Page<Owner> findByLastNameStartingWith(String, Pageable); Optional<Owner> findById(Integer); <S extends Owner> S save(S) | Owners Aggregate; Relational Database and Initialization | Spring Data JPA (JpaRepository), Hibernate |
| PetTypeRepository | Access to PetType entities and ordered listing | @Query findPetTypes(); List<PetType> findAll(); Optional<PetType> findById(Integer) | PetType Domain; Relational Database and Initialization | Spring Data JPA (JpaRepository), Hibernate |
| VetRepository | Persistence for vets; cached read operations | @Cacheable("vets") Collection<Vet> findAll(); @Cacheable("vets") Page<Vet> findAll(Pageable) | Vets Aggregate; CacheConfiguration; Relational Database and Initialization | Spring Data (Repository), JCache/Caffeine |
| Owners Aggregate (Owner, Pet, Visit) | Core customer/patient domain; aggregate root Owner; cascaded writes and eager reads | Owner.addPet(Pet); Owner.getPet(String[, boolean]); Owner.getPet(Integer); Owner.addVisit(Integer, Visit); Pet.addVisit(Visit) | PetType Domain | JPA Entities; Cascade ALL; EAGER fetch (Owner.pets, Pet.visits); Bean Validation |
| Vets Aggregate (Vet, Specialty) | Veterinarian domain with specialties | Vet.getSpecialties() (sorted by name); getters/setters | — | JPA Entities; ManyToMany (EAGER); Sorted collections |
| PetType Domain | Pet species/type catalog | getters/setters (name) | — | JPA Entity |
| PetValidator | Validates Pet creation/update rules | validate(Object, Errors) | Owners Aggregate; PetTypeFormatter (indirectly via binding) | Spring Validation (Validator), Business rules (name/type/birthDate, duplicate-name, not-future) |
| PetTypeFormatter | Binds PetType in forms (parse/print) | parse(String, Locale); print(PetType, Locale) | PetTypeRepository | Spring Formatter SPI |
| Thymeleaf Templates (Views) | Server-side rendered pages and forms | owner/pet/vet templates: createOrUpdateOwnerForm.html; findOwners.html; ownersList.html; ownerDetails.html; createOrUpdatePetForm.html; createOrUpdateVisitForm.html; vetList.html; fragments/layout.html | Controllers; WebConfiguration | Thymeleaf, WebJars (Bootstrap, Font Awesome) |
| Actuator Endpoints | Observability and health probes | /actuator/*; /livez; /readyz (when probes property enabled) | PetClinicApplication | Spring Boot Actuator |
| Relational Database and Initialization | Persistent store and schema/data initialization via profiles | JDBC URLs via H2/MySQL/Postgres profiles; schema.sql/data.sql via spring.sql.init.*; H2 console at /h2-console | OwnerRepository; PetTypeRepository; VetRepository | H2 (default), MySQL, PostgreSQL; Testcontainers; Docker Compose; JPA/Hibernate |
| Vets DTO (Vets wrapper) | JSON envelope for /vets endpoint | getVetList(); setVetList(Collection<Vet>) | Vets Aggregate | Jackson (JSON serialization) |